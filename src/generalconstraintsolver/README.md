General Constraint Solver README
================================

Requirements
------------

In order to use the dataflow type system, you first need to set up the
following four projects:

- https://bitbucket.org/typetools/jsr308-langtools
- https://github.com/typetools/annotation-tools
- https://github.com/typetools/checker-framework
- https://github.com/typetools/checker-framework-inference

You'll need environment variables `CHECKERFRAMEWORK`, `JSR308`,
`JAVA_HOME`, and `AFU` set up appropriately.
The `insert-annotations-to-source` script from AFU must be on your path.

The tool `do-like-javac` makes usage easier:

- https://github.com/SRI-CSL/pascali-public.git                                        

I created a shortcut for this tool:

```
alias do-like-javac='python /the/path/to/do-like-javac/bin/do-like-javac.py'
```

The tool `graphviz` could visualize the dot files that are generated by checker-framework.

- http://www.graphviz.org


Building
--------

1. Clone this repository into the `$JSR308` directory.

  ```
  cd $JSR308
  git clone https://github.com/Jianchu/generic-type-inference-solver.git
  ```

2. In the `generic-type-inference-solver/scripts` directory, run
`compile.sh`. This bash script will compile the whole project. 

  ```
  bash generic-type-inference-solver/compile.sh
  ```

3. Now you can use all the scripts in `generic-type-inference-solver/scripts` 
to run different constraint solvers:

  ```
  bash $JSR308/generic-type-inference-solver/scripts/runGeneralLogiqlSolver.sh [List of files]
  ```

  There are five solvers in total:
  GeneralLogiqlSolver and GeneralSatSolver are for solving the constraints from any normal type system. First solver is developed for Max-Sat encoding, and second one is for LogiQL encoding.
  runDataflowLogiqlSolver, runDataflowSatSolver, and inferDataflow are solvers for Dataflow type system. First two are developed upon the GeneralSolver, and the last one is the original solver for Dataflow type system, which uses the logic of solving the constraints from 2-modifiers type system.
